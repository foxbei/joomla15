/* Copyright (C) 2007 - 2010 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

Zoo.ElementDownload=new Class({Implements:[Options],initialize:function(b){this.setOptions({element:"",url:"",directory:"images"},b);var a=this;this.div=$(this.options.element);(b=this.div.getElement('input[name="reset-hits"]'))&&b.addEvent("click",function(){a.resetHits()});this.div.getElement("select").addEvent("change",function(){a.div.getElement("input[name^=elements]").set("value",this.get("value")?a.options.directory+this.get("value"):"")})},resetHits:function(){(new Request.HTML({url:this.options.url+
"&task=callelement&method=reset",update:this.div})).post()}});
Zoo.DownloadSubmission=new Class({Implements:[Options],initialize:function(b){this.setOptions({element:""},b);var a=this;this.element=$(this.options.element);this.select_upload=(this.advanced=this.element.getElement("select.upload"))?this.advanced:this.element.getElement("input.upload");this.element.getElement("span.download-cancel").addEvent("click",function(){a.select_upload.set("value","");var c=a.element.getElement("div.download-limit");c&&c.getElement("input").set("value","");a.sanatize()});
this.advanced&&this.select_upload.addEvent("change",function(){a.element.getElement("span.preview").set("text",a.select_upload.get("value").replace(/^.*[\/\\]/g,""));a.sanatize()});a.sanatize()},sanatize:function(){if(this.select_upload.get("value")){this.element.getElement("div.download-select").addClass("hidden");this.element.getElement("div.download-preview").removeClass("hidden")}else{this.element.getElement("div.download-select").removeClass("hidden");this.element.getElement("div.download-preview").addClass("hidden")}}});
