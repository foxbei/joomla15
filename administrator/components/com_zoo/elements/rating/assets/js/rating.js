/* Copyright (C) 2007 - 2010 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

var ElementRating=new Class({initialize:function(d,b){this.element=$(d);this.url=b;var a=this.element.getElements("div.stars");a.each(function(c,e){c.addEvent("click",function(){this.vote(a.length-e)}.bind(this));c.addEvent("mouseenter",function(){c.addClass("hover")});c.addEvent("mouseleave",function(){c.removeClass("hover")})}.bind(this))},vote:function(d){(new Request.HTML({url:this.url,data:"method=vote&args[0]="+d,onComplete:function(b,a,c){a=c.split(",");b=a[0];a=a[1];b>0&&this.element.getElement("div.previous-rating").setStyle("width",
b+"%");this.element.getElement("div.vote-message").set("html",a)}.bind(this)})).post()}});Zoo.EditElementRating=new Class({initialize:function(d,b){this.url=b;this.div=$(d);this.div.getElement('input[name="reset-rating"]').addEvent("click",function(){this.resetVotes()}.bind(this))},resetVotes:function(){(new Request.HTML({url:this.url+"&task=callelement&method=reset",update:this.div})).post()}});
