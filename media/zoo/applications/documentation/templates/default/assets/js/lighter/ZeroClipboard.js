var ZeroClipboard={Implements:[Options,Events],options:{version:"1.0.4",clients:{},moviePath:"ZeroClipboard.swf",nextId:1},initialize:function(a,b){this.setOptions(b);this.handlers={};this.id=this.options.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;this.register(this.id,this);a&&this.glue(a)},dispatch:function(a,b,d){(a=this.options.clients[a])&&a.receiveEvent(b,d)},register:function(a,b){this.options.clients[a]=b}};
ZeroClipboard.Client=new Class({id:0,ready:false,movie:null,clipText:"",handCursorEnabled:true,cssEffects:true,handlers:null,path:"./",initialize:function(a){this.handlers={};this.id=ZeroClipboard.options.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);a&&this.glue(a)},setPath:function(a){this.path=a},glue:function(a){this.domElement=a;a=99;if(this.domElement.style.zIndex)a=parseInt(this.domElement.style.zIndex)+1;var b=this.domElement.getSize(),d=this.domElement.getPosition();
this.div=new Element("div",{title:"Click to copy to clipboard"});var c=this.div.style;c.position="absolute";c.left=""+d.x+"px";c.top=""+d.y+"px";c.width=""+b.x+"px";c.height=""+b.y+"px";c.zIndex=a;document.getElementsByTagName("body")[0].appendChild(this.div);this.div.innerHTML=this.getHTML(b.x,b.y)},getHTML:function(a,b){var d="",c="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/)){var f=location.href.match(/^https/i)?"https://":"http://";d+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+
f+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+this.path+ZeroClipboard.options.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+c+'"/><param name="wmode" value="transparent"/></object>'}else d+=
'<embed id="'+this.movieId+'" src="'+this.path+ZeroClipboard.options.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+c+'" wmode="transparent" />';return d},hide:function(){if(this.div)this.div.style.left="-2000px"},show:function(){this.reposition()},
destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.div=this.domElement=null}},reposition:function(a){if(a)(this.domElement=a)||this.hide();if(this.domElement&&this.div){a=this.domElement.getPosition();var b=this.div.style;b.left=""+a.x+"px";b.top=""+a.y+"px"}},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,
"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=$(this.movieId);if(!this.movie){var d=this;setTimeout(function(){d.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){d=
this;setTimeout(function(){d.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;this.movie.setText(this.clipText);this.movie.setHandCursor(this.handCursorEnabled);break;case "mouseover":if(this.domElement&&this.cssEffects){this.domElement.addClass("hover");this.recoverActive&&this.domElement.addClass("active")}break;case "mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=
true}this.domElement.removeClass("hover")}break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}}if(this.handlers[a])for(var c=0,f=this.handlers[a].length;c<f;c++){var e=this.handlers[a][c];if(typeof e=="function")e(this,b);else if(typeof e=="object"&&e.length==2)e[0][e[1]](this,b);else typeof e=="string"&&window[e](this,b)}}});
