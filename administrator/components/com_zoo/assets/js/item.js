/* Copyright (C) 2007 - 2011 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

(function(b){var c=function(){};c.prototype=b.extend(c.prototype,{name:"BrowseItems",options:{url:"index.php"},initialize:function(e,d){this.options=b.extend({},this.options,d);var f=this;this.timer=null;this.delay=1500;this.input=e;e.find("td.priority").each(function(){var a=b(this).find("input.value:first");a.bind("change",function(){f.save(this)});b(this).find("span.plus:first, span.minus:first").bind("click",function(){var g=b(this).is(".plus")?1:-1;a.attr("value",a.val().toInt()+g).trigger("change")})})},
save:function(){var e=this;this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){var d={},f=e.input.find("table.list:first");b.each(e.input.find("input[name^=priority], input[type=hidden]").serializeArray(),function(a,g){d[g.name]=g.value});f.addClass("loader");b.ajax({url:e.options.url,type:"post",datatype:"json",data:b.extend(d,{task:"savepriority",format:"raw"}),success:function(a){f.removeClass("loader");b.Message(a,true)}})},this.delay)}});b.fn[c.prototype.name]=function(){var e=
arguments,d=e[0]?e[0]:null;return this.each(function(){var f=b(this);if(c.prototype[d]&&f.data(c.prototype.name)&&d!="initialize")f.data(c.prototype.name)[d].apply(f.data(c.prototype.name),Array.prototype.slice.call(e,1));else if(!d||b.isPlainObject(d)){var a=new c;c.prototype.initialize&&a.initialize.apply(a,b.merge([f],e));f.data(c.prototype.name,a)}else b.error("Method "+d+" does not exist on jQuery."+c.name)})}})(jQuery);
(function(b){var c=function(){};c.prototype=b.extend(c.prototype,{name:"EditItem",initialize:function(e){$this=this;b.each(["apply","save","saveandnew"],function(a,g){b("#toolbar-"+g+" a").bind("validate.adminForm",function(h){if(e.find('input[name="name"]').val()==""){e.find("span.message-name").css("display","inline");h.preventDefault()}})});var d=b("#categories"),f=b("#paramsprimary_category");d.bind("change",function(){var a=b(this).val();a=a?a:[];f.val()in a||f.val(a.length?a.shift():"")});f.bind("change",
function(){var a=d.val();a=a?a:[];var g=b(this).val();if(g&&!(g in a)){a.push(g);d.val(a)}});e.find("div.element").each(function(){b(this).delegate("div.more-options div.trigger div.button","click",function(){var a=b(this).closest("div.more-options"),g="show-"+b(this).attr("class").split(" ").shift();a.hasClass(g)?a.attr("class","more-options"):a.attr("class","more-options "+g);b(this).closest("ul").css("height",b(this).closest("ul").css("height","").height())}).find("div.row > input:text").placeholder()})}});
b.fn[c.prototype.name]=function(){var e=arguments,d=e[0]?e[0]:null;return this.each(function(){var f=b(this);if(c.prototype[d]&&f.data(c.prototype.name)&&d!="initialize")f.data(c.prototype.name)[d].apply(f.data(c.prototype.name),Array.prototype.slice.call(e,1));else if(!d||b.isPlainObject(d)){var a=new c;c.prototype.initialize&&a.initialize.apply(a,b.merge([f],e));f.data(c.prototype.name,a)}else b.error("Method "+d+" does not exist on jQuery."+c.name)})}})(jQuery);
