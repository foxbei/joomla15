/* Copyright  2007 - 2010 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

var Warp=Warp||{};
Warp.Spotlight=new Class({Implements:Options,initialize:function(f,c){var a=this;this.setOptions({effect:"fade",effectOptions:{duration:300}},c);this.element=document.id(f);this.slides=this.element.getChildren();this.slides.each(function(b){(new Element("div")).wraps(b)});this.slides=this.element.getChildren();this.slides.each(function(b,d){b.setStyles({position:"absolute",width:"100%",visibility:d==0?"visible":"hidden"}).addClass("spotlight"+d)});this.element.setStyles({position:"relative",overflow:"hidden",
height:a.slides[0].getSize().y});this.element.addEvents({mouseenter:function(){switch(a.options.effect){case "right":a.fx.cancel().set({right:a.slides[1].getSize().x*-1,visibility:"visible"}).start({right:[a.slides[1].getSize().x*-1,0]});break;case "left":a.fx.cancel().set({left:a.slides[1].getSize().x*-1,visibility:"visible"}).start({left:[a.slides[1].getSize().x*-1,0]});break;case "top":a.fx.cancel().set({left:0,top:a.slides[1].getSize().y*-1,visibility:"visible"}).start({top:[a.slides[1].getSize().y*
-1,0]});break;case "bottom":a.fx.cancel().set({left:0,bottom:a.slides[1].getSize().y*-1,visibility:"visible"}).start({bottom:[a.slides[1].getSize().y*-1,0]});break;default:a.fx.cancel().start({opacity:[0,1],visibility:["hidden","visible"]})}},mouseleave:function(){switch(a.options.effect){case "right":a.fx.cancel().start({right:[0,a.slides[1].getSize().x*-1]});break;case "left":a.fx.cancel().start({left:[0,a.slides[1].getSize().x*-1]});break;case "top":a.fx.cancel().start({top:[0,a.slides[1].getSize().y*
-1]});break;case "bottom":a.fx.cancel().start({bottom:[0,a.slides[1].getSize().y*-1]});break;default:a.fx.cancel().start({visibility:["visible","hidden"],opacity:[1,0]})}}});this.fx=new Fx.Morph(this.slides[1],this.options.effectOptions)}});
Warp.Spotlight.attach=function(f,c){c=$extend({right:300,left:300,top:300,bottom:300,fade:300},c);document.getElements(f).each(function(a){var b="fade",d=c[b];String(a.getProperty("class")).split(" ").each(function(e){if(["right","left","top","bottom","fade"].contains(e)){b=e;d=c[b]}if(e.test("duration-"))d=e.split("-")[1]});new Warp.Spotlight(a,{effect:b,effectOptions:{duration:d}})})};
