/* Copyright (C) 2007 - 2010 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

Zoo.ElementRepeatableTextarea=new Class({Extends:Zoo.ElementRepeatable,initialize:function(b){this.setOptions({element:"",msgDeleteElement:null},b);var a=this;this.element=$(this.options.element);this.list=this.element.getElement("ul.repeatable-list");this.hiddens=this.list.getElements("li.hidden");this.hiddens.each(function(c){c.getElements("*").each(function(d){if(d.getProperty("name")){d.__name=d.getProperty("name");d.setProperty("name","")}})});this.element.getElements("li.repeatable-element").each(function(c){c.getElement("span.delete").addEvent("click",
function(){a.deleteElement(c)})});this.add=this.element.getElement("p.add a");this.add.addEvent("click",function(){a.addElement()})},addElement:function(){var b=this.hiddens.shift().removeClass("hidden");this.hiddens.erase(b);b.getElements("*").each(function(a){a.__name&&a.setProperty("name",a.__name)});this.highlight(b.getElement("div.repeatable-content"));this.hiddens.length==0&&this.add.setStyle("display","none")}});
