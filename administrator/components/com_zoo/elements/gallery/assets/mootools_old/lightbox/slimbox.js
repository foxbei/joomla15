/* Copyright (C) 2007 - 2011 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

var Slimbox;
(function(){function u(){o.setStyles({top:window.getScrollTop(),height:window.getHeight()})}function y(a){["object",window.ie?"select":"embed"].forEach(function(j){$each(document.getElementsByTagName(j),function(i){if(a)z[i]=i.style.visibility;i.style.visibility=a?"hidden":z[i]})});o.style.display=a?"":"none";var c=a?"addEvent":"removeEvent";window[c]("scroll",u)[c]("resize",u);document[c]("keydown",A)}function H(a){switch(a.code){case 27:case 88:case 67:B();break;case 37:case 80:C();break;case 39:case 78:D()}a.preventDefault()}
function C(){return v(p)}function D(){return v(k)}function v(a){if(h==1&&a>=0){h=2;l=a;p=(l||!b.loop?l:e.length)-1;k=l+1;if(k==e.length)k=b.loop?0:-1;$$(q,r,f,m).setStyle("display","none");d.bottom.stop().set(0);d.image.set(0);g.className="lbLoading";n=new Image;n.onload=w;n.src=e[a][0]}return false}function w(){switch(h++){case 2:g.className="";f.setStyles({backgroundImage:"url("+e[l][0]+")",display:""});$$(f,s).setStyle("width",n.width);$$(f,q,r).setStyle("height",n.height);E.setHTML(e[l][1]||"");
F.setHTML(b.showCounter&&e.length>1?b.counterText.replace(/{x}/,l+1).replace(/{y}/,e.length):"");if(p>=0)I.src=e[p][0];if(k>=0)J.src=e[k][0];if(g.clientHeight!=f.offsetHeight){d.resize.start({height:f.offsetHeight});break}h++;case 3:if(g.clientWidth!=f.offsetWidth){d.resize.start({width:f.offsetWidth,marginLeft:-f.offsetWidth/2});break}h++;case 4:m.setStyles({top:x+g.clientHeight,marginLeft:g.style.marginLeft,visibility:"hidden",display:""});d.image.start(1);break;case 5:if(p>=0)q.style.display="";
if(k>=0)r.style.display="";b.animateCaption&&d.bottom.set(-s.offsetHeight).start(0);m.style.visibility="";h=1}}function B(){if(h){h=0;n.onload=Class.empty;for(var a in d)d[a].stop();$$(g,m).setStyle("display","none");d.overlay.chain(y).start(0)}return false}var z={},h=0,b,e,l,p,k,x,A,d,n,I=new Image,J=new Image,o,g,f,q,r,m,s,E,F;window.addEvent("domready",function(){A=H.bindWithEvent();$(document.body).adopt($$([o=new Element("div",{id:"lbOverlay"}),g=new Element("div",{id:"lbCenter"}),m=new Element("div",
{id:"lbBottomContainer"})]).setStyle("display","none"));f=(new Element("div",{id:"lbImage"})).injectInside(g).adopt(q=new Element("a",{id:"lbPrevLink",href:"#"}),r=new Element("a",{id:"lbNextLink",href:"#"}));q.onclick=C;r.onclick=D;var a;s=(new Element("div",{id:"lbBottom"})).injectInside(m).adopt(a=new Element("a",{id:"lbCloseLink",href:"#"}),E=new Element("div",{id:"lbCaption"}),F=new Element("div",{id:"lbNumber"}),new Element("div",{styles:{clear:"both"}}));a.onclick=o.onclick=B;d={overlay:o.effect("opacity",
{duration:500}).set(0),image:f.effect("opacity",{duration:500,onComplete:w}),bottom:s.effect("margin-top",{duration:400})}});Slimbox={open:function(a,c,j){b=$extend({loop:false,overlayOpacity:0.8,resizeDuration:400,resizeTransition:false,initialWidth:250,initialHeight:250,animateCaption:true,showCounter:true,counterText:"Image {x} of {y}"},j||{});if(typeof a=="string"){a=[[a,c]];c=0}e=a;b.loop=b.loop&&e.length>1;u();y(true);x=window.getScrollTop()+window.getHeight()/15;d.resize=g.effects($extend({duration:b.resizeDuration,
onComplete:w},b.resizeTransition?{transition:b.resizeTransition}:{}));g.setStyles({top:x,width:b.initialWidth,height:b.initialHeight,marginLeft:-(b.initialWidth/2),display:""});d.overlay.start(b.overlayOpacity);h=1;return v(c)}};Element.extend({slimbox:function(a,c){$$(this).slimbox(a,c);return this}});Elements.extend({slimbox:function(a,c,j){c=c||function(t){return[t.href,t.title]};j=j||function(){return true};var i=this;i.forEach(function(t){t.onclick=function(){var G=i.filter(j,this);return Slimbox.open(G.map(c),
G.indexOf(this),a)}});return i}})})();
